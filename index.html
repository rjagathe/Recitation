<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acharya108 - Affordable Education for All</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tagline {
            font-size: 1.3em;
            font-style: italic;
            opacity: 0.9;
        }

        .content-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: fadeInUp 1s ease;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 3px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .tab {
            padding: 15px 30px;
            background: #f5f5f5;
            border: none;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            color: #555;
        }

        .tab:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
        }

        .sub-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding-left: 20px;
            flex-wrap: wrap;
        }

        .sub-tab {
            padding: 10px 20px;
            background: #e3f2fd;
            border: 2px solid #2196F3;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #1976D2;
        }

        .sub-tab:hover {
            background: #2196F3;
            color: white;
            transform: scale(1.05);
        }

        .sub-tab.active {
            background: #2196F3;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .float-button {
            padding: 20px;
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .float-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.6);
        }

        .float-button.disabled {
            background: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .breadcrumb {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: 600;
            color: #555;
        }

        .question-list {
            list-style: none;
        }

        .question-item {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
            margin: 15px 0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #667eea;
        }

        .question-item:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .section-title {
            font-size: 1.5em;
            color: #667eea;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .back-button {
            background: #ff6b6b;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }

        .learning-interface {
            display: none;
        }

        .learning-interface.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .question-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .question-header h2 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .level-selector {
            display: flex;
            gap: 10px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .level-btn {
            flex: 1;
            min-width: 100px;
            padding: 15px;
            border: 3px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .level-btn:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
        }

        .level-btn.active {
            background: #667eea;
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .answer-display {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
            line-height: 1.8;
            font-size: 1.1em;
        }

        .answer-display h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .key-terms {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #ffc107;
        }

        .recite-section {
            display: none;
            margin-top: 30px;
        }

        .recite-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .timer-display {
            text-align: center;
            font-size: 3em;
            color: #667eea;
            font-weight: bold;
            margin: 20px 0;
        }

        .timer-display.warning {
            color: #ff9800;
        }

        .timer-display.danger {
            color: #f44336;
            animation: pulse 1s infinite;
        }

        .voice-input-area {
            background: #f0f4ff;
            padding: 30px;
            border-radius: 12px;
            border: 3px dashed #667eea;
            text-align: center;
        }

        .mic-button {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(145deg, #667eea, #764ba2);
            border: none;
            color: white;
            font-size: 3em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            margin: 20px auto;
            display: block;
        }

        .mic-button:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .mic-button.recording {
            background: #f44336;
            animation: pulse 1.5s infinite;
        }

        .transcription-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            min-height: 150px;
            border: 2px solid #667eea;
            text-align: left;
            font-size: 1.1em;
            line-height: 1.6;
            max-height: 300px;
            overflow-y: auto;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .primary-btn {
            padding: 15px 40px;
            background: linear-gradient(145deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .secondary-btn {
            padding: 15px 40px;
            background: white;
            color: #667eea;
            border: 3px solid #667eea;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .secondary-btn:hover {
            background: #f0f0f0;
        }

        .feedback-section {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-top: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .feedback-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .score-display {
            text-align: center;
            margin: 25px 0;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(145deg, #4caf50, #45a049);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            font-weight: bold;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(76, 175, 80, 0.4);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-size: 1.2em;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            .level-selector {
                flex-direction: column;
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì Acharya108</h1>
            <p class="tagline">Affordable Education for All - Laws of Motion Learning System</p>
        </header>

        <div class="content-card">
            <div id="breadcrumb" class="breadcrumb">Home</div>
            
            <button id="backBtn" class="back-button" style="display: none;">‚Üê Back</button>

            <div class="tabs">
                <button class="tab" data-tab="cbse">CBSE</button>
                <button class="tab active" data-tab="tn">TN State Board</button>
            </div>

            <div id="cbse-content" class="tab-content">
                <p style="text-align: center; padding: 40px; color: #999; font-size: 1.2em;">
                    CBSE content coming soon...
                </p>
            </div>

            <div id="tn-content" class="tab-content active">
                <div class="sub-tabs">
                    <button class="sub-tab active" data-medium="english">English Medium</button>
                    <button class="sub-tab" data-medium="tamil">Tamil Medium</button>
                </div>

                <div id="english-medium" class="tab-content active">
                    <div id="grade-selection">
                        <h3 style="margin-bottom: 20px; color: #333;">Select Grade:</h3>
                        <div class="button-grid">
                            <button class="float-button" data-grade="6">Grade 6</button>
                            <button class="float-button" data-grade="7">Grade 7</button>
                            <button class="float-button" data-grade="8">Grade 8</button>
                            <button class="float-button" data-grade="9">Grade 9</button>
                            <button class="float-button" data-grade="10">Grade 10</button>
                            <button class="float-button" data-grade="11">Grade 11</button>
                            <button class="float-button" data-grade="12">Grade 12</button>
                        </div>
                    </div>

                    <div id="subject-selection" style="display: none;">
                        <h3 style="margin-bottom: 20px; color: #333;">Select Subject:</h3>
                        <div class="button-grid">
                            <button class="float-button" data-subject="tamil">Tamil</button>
                            <button class="float-button" data-subject="english">English</button>
                            <button class="float-button" data-subject="science">Science</button>
                            <button class="float-button" data-subject="social">Social Studies</button>
                        </div>
                    </div>

                    <div id="lesson-selection" style="display: none;">
                        <h3 style="margin-bottom: 20px; color: #333;">Select Lesson:</h3>
                        <div class="button-grid">
                            <button class="float-button" data-lesson="1">Lesson 1: Laws of Motion</button>
                            <button class="float-button disabled">Lesson 2: Coming Soon</button>
                            <button class="float-button disabled">Lesson 3: Coming Soon</button>
                            <button class="float-button disabled">Lesson 4: Coming Soon</button>
                        </div>
                    </div>

                    <div id="question-selection" style="display: none;">
                        <h3 class="section-title">üìù Brief Answer Questions</h3>
                        <ul class="question-list" id="brief-questions"></ul>

                        <h3 class="section-title">üìö Detailed Answer Questions</h3>
                        <ul class="question-list" id="detailed-questions"></ul>
                    </div>

                    <div id="learning-interface" class="learning-interface">
                        <div class="question-header">
                            <h2 id="current-question"></h2>
                            <p style="margin-top: 10px; opacity: 0.9;">Select a difficulty level and study the answer</p>
                        </div>

                        <div class="level-selector">
                            <button class="level-btn active" data-level="basic">Basic</button>
                            <button class="level-btn" data-level="elementary">Elementary</button>
                            <button class="level-btn" data-level="intermediate">Intermediate</button>
                            <button class="level-btn" data-level="advanced">Advanced</button>
                            <button class="level-btn" data-level="expert">Expert</button>
                        </div>

                        <div id="answer-display" class="answer-display">
                            <div class="loading">
                                <div class="spinner"></div>
                                <p>Loading answer...</p>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button class="primary-btn" onclick="startRecite()">üé§ Start Reciting</button>
                        </div>

                        <div id="recite-section" class="recite-section">
                            <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #ffc107;">
                                <strong>üì¢ Instructions:</strong> Click the microphone to record. Recite the answer you memorized. Try to include all key points!
                            </div>

                            <div id="voice-mode" class="voice-input-area">
                                <div class="timer-display" id="timer">3:00</div>
                                <h3 style="margin-bottom: 15px;">Click microphone to start/stop recording</h3>
                                <button class="mic-button" id="micBtn" onclick="toggleRecording()">üé§</button>
                                <p id="recording-status" style="color: #667eea; font-weight: bold; margin-bottom: 15px;">Ready to record</p>
                                
                                <div class="transcription-box" id="transcription">
                                    Your answer will appear here as you speak...
                                </div>
                            </div>

                            <div class="action-buttons">
                                <button class="secondary-btn" onclick="stopRecite()">Cancel</button>
                                <button class="primary-btn" onclick="submitForEvaluation()">‚úì Submit for Evaluation</button>
                            </div>
                        </div>

                        <div id="feedback-section" class="feedback-section">
                            <h2 style="color: #667eea; margin-bottom: 20px;">üìä Your Performance</h2>
                            
                            <div class="score-display">
                                <div class="score-circle" id="score-circle">85%</div>
                            </div>

                            <div id="feedback-text" style="margin-top: 25px;">
                                Loading evaluation...
                            </div>

                            <div class="action-buttons">
                                <button class="secondary-btn" onclick="tryAgain()">üîÑ Try Again</button>
                                <button class="primary-btn" onclick="nextQuestion()">Next Question ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tamil-medium" class="tab-content">
                    <p style="text-align: center; padding: 40px; color: #999; font-size: 1.2em;">
                        Tamil Medium content coming soon...
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Questions database
        const questions = {
            brief: [
                "Define inertia. Give its classification.",
                "Classify the types of force based on their application.",
                "If a 5 Newton and a 15 Newton forces are acting opposite to one another. Find the resultant force and the direction of action of the resultant force",
                "Differentiate mass and weight.",
                "Define moment of a couple.",
                "State the principle of moments.",
                "State Newton's second law.",
                "Why a spanner with a long handle is preferred to tighten screws in heavy vehicles?",
                "While catching a cricket ball the fielder lowers his hands backwards. Why?",
                "How does an astronaut float in a space shuttle?"
            ],
            detailed: [
                "What are the types of inertia? Give an example for each type.",
                "State Newton's laws of motion?",
                "Deduce the equation of a force using Newton's second law of motion.",
                "State and prove the law of conservation of linear momentum.",
                "Describe rocket propulsion.",
                "State the universal law of gravitation and derive its mathematical expression",
                "Give the applications of universal law gravitation."
            ]
        };

        // Navigation state
        let currentState = {
            board: 'tn',
            medium: 'english',
            grade: null,
            subject: null,
            lesson: null,
            question: null,
            level: 'basic',
            isRecording: false,
            recognition: null,
            timeRemaining: 180,
            timerInterval: null,
            userTranscript: '',
            currentAnswer: ''
        };

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    switchTab(this.dataset.tab);
                });
            });

            // Sub-tab switching
            document.querySelectorAll('.sub-tab').forEach(subTab => {
                subTab.addEventListener('click', function() {
                    switchMedium(this.dataset.medium);
                });
            });

            // Grade selection
            document.querySelectorAll('[data-grade]').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectGrade(parseInt(this.dataset.grade));
                });
            });

            // Subject selection
            document.querySelectorAll('[data-subject]').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectSubject(this.dataset.subject);
                });
            });

            // Lesson selection
            document.querySelectorAll('[data-lesson]:not(.disabled)').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectLesson(parseInt(this.dataset.lesson));
                });
            });

            // Level buttons
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    selectLevel(this.dataset.level);
                });
            });

            // Back button
            document.getElementById('backBtn').addEventListener('click', goBack);

            // Initialize speech recognition
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                currentState.recognition = new SpeechRecognition();
                currentState.recognition.continuous = true;
                currentState.recognition.interimResults = true;
                currentState.recognition.lang = 'en-US';
                
                currentState.recognition.onresult = function(event) {
                    let transcript = '';
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        transcript += event.results[i][0].transcript + ' ';
                    }
                    currentState.userTranscript = transcript.trim();
                    document.getElementById('transcription').textContent = currentState.userTranscript || 'Your answer will appear here as you speak...';
                };

                currentState.recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    document.getElementById('recording-status').textContent = 'Error: ' + event.error + ' - Click mic to try again';
                };

                currentState.recognition.onend = function() {
                    if (currentState.isRecording) {
                        // Automatically restart if still in recording mode
                        currentState.recognition.start();
                    }
                };
            }
        });

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                }
            });

            document.querySelectorAll('#cbse-content, #tn-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + '-content').classList.add('active');

            currentState.board = tabName;
            updateBreadcrumb();
        }

        function switchMedium(medium) {
            document.querySelectorAll('.sub-tab').forEach(subTab => {
                subTab.classList.remove('active');
                if (subTab.dataset.medium === medium) {
                    subTab.classList.add('active');
                }
            });

            document.getElementById('english-medium').classList.remove('active');
            document.getElementById('tamil-medium').classList.remove('active');
            document.getElementById(medium + '-medium').classList.add('active');

            currentState.medium = medium;
            updateBreadcrumb();
        }

        function selectGrade(grade) {
            if (grade !== 10) {
                alert('Only Grade 10 Science content is currently available!');
                return;
            }
            currentState.grade = grade;
            document.getElementById('grade-selection').style.display = 'none';
            document.getElementById('subject-selection').style.display = 'block';
            updateBreadcrumb();
        }

        function selectSubject(subject) {
            if (subject !== 'science') {
                alert('Only Science content is currently available!');
                return;
            }
            currentState.subject = subject;
            document.getElementById('subject-selection').style.display = 'none';
            document.getElementById('lesson-selection').style.display = 'block';
            updateBreadcrumb();
        }

        function selectLesson(lessonNum) {
            currentState.lesson = lessonNum;
            document.getElementById('lesson-selection').style.display = 'none';
            document.getElementById('question-selection').style.display = 'block';
            
            loadQuestions();
            updateBreadcrumb();
        }

        function loadQuestions() {
            const briefList = document.getElementById('brief-questions');
            const detailedList = document.getElementById('detailed-questions');
            
            briefList.innerHTML = '';
            detailedList.innerHTML = '';
            
            questions.brief.forEach((q, index) => {
                const li = document.createElement('li');
                li.className = 'question-item';
                li.innerHTML = `
                    <div style="font-weight: bold; color: #667eea; margin-bottom: 8px;">Question ${index + 1}</div>
                    <div style="font-size: 1.1em;">${q}</div>
                `;
                li.onclick = () => selectQuestion(q, 'brief');
                briefList.appendChild(li);
            });
            
            questions.detailed.forEach((q, index) => {
                const li = document.createElement('li');
                li.className = 'question-item';
                li.innerHTML = `
                    <div style="font-weight: bold; color: #667eea; margin-bottom: 8px;">Question ${index + 1}</div>
                    <div style="font-size: 1.1em;">${q}</div>
                `;
                li.onclick = () => selectQuestion(q, 'detailed');
                detailedList.appendChild(li);
            });
        }

        function selectQuestion(question, type) {
            currentState.question = { text: question, type: type };
            
            document.getElementById('question-selection').style.display = 'none';
            document.getElementById('learning-interface').classList.add('active');
            document.getElementById('current-question').textContent = question;
            
            loadAnswer();
            updateBreadcrumb();
        }

        function selectLevel(level) {
            currentState.level = level;
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.level === level) {
                    btn.classList.add('active');
                }
            });
            
            loadAnswer();
        }

        function loadAnswer() {
            const answerDisplay = document.getElementById('answer-display');
            answerDisplay.innerHTML = '<div class="loading"><div class="spinner"></div><p>Generating answer...</p></div>';

            // Simulate loading and generate answer
            setTimeout(() => {
                const answer = getDemoAnswer(currentState.level);
                currentState.currentAnswer = answer;
                
                answerDisplay.innerHTML = `
                    <h3>üìñ ${currentState.level.charAt(0).toUpperCase() + currentState.level.slice(1)} Level Answer</h3>
                    <p style="line-height: 2; margin-top: 15px;">${answer}</p>
                    <div class="key-terms">
                        <strong>üí° Study Tip:</strong> Read this answer carefully and try to understand all key concepts before clicking "Start Reciting". Take your time!
                    </div>
                `;
            }, 800);
        }

        function getDemoAnswer(level) {
            const question = currentState.question.text;
            
            // Different answers based on question and level
            const answers = {
                "Define inertia. Give its classification.": {
                    basic: "Inertia is the property of an object to resist changes in its state of motion. It is classified into three types: inertia of rest (objects at rest stay at rest), inertia of motion (moving objects keep moving), and inertia of direction (objects continue in the same direction).",
                    elementary: "Inertia is the tendency of a body to maintain its state of rest or uniform motion. The three types are: (1) Inertia of rest - objects at rest tend to stay at rest unless acted upon by an external force. (2) Inertia of motion - moving objects tend to keep moving at the same speed and direction. (3) Inertia of direction - objects moving in a straight line tend to continue in that direction unless disturbed.",
                    intermediate: "Inertia is a fundamental property of matter that describes the resistance of an object to any change in its velocity. This property is directly proportional to the mass of the object. The three classifications are: Inertia of rest keeps stationary objects stationary unless acted upon by external force (example: a book on a table). Inertia of motion maintains constant velocity in moving objects (example: a moving car continues to move forward even when the engine is turned off). Inertia of direction preserves the direction of motion unless external force intervenes (example: mud flying off from a rotating wheel moves tangentially).",
                    advanced: "Inertia represents the quantitative measure of an object's resistance to acceleration, directly proportional to its mass as described in Newton's First Law of Motion. The three types are: (1) Inertia of rest - exemplified by a book remaining on a table until an external force is applied, due to molecular cohesion and intermolecular forces maintaining the object's position. (2) Inertia of motion - demonstrated when passengers lurch forward during sudden braking, as their bodies tend to maintain their state of motion according to the law of conservation of momentum. (3) Inertia of direction - observed when a stone tied to a string moves tangentially upon release, as it maintains its instantaneous velocity direction due to absence of centripetal force.",
                    expert: "Inertia is an intrinsic property of matter that manifests as resistance to changes in velocity, mathematically represented by mass in Newton's second law (F=ma). The classification into three types reflects different observational frames: Static inertia (rest) derives from molecular forces and intermolecular attractions maintaining positional equilibrium in the center of mass frame. Kinetic inertia (motion) reflects momentum conservation (p=mv) where objects maintain linear velocity absent external forces, as described by Galilean relativity. Directional inertia emerges from vector properties of velocity, requiring centripetal force (F=mv¬≤/r) for circular motion. This principle extends to Einstein's general relativity where inertial mass equals gravitational mass, leading to the equivalence principle."
                },
                "Classify the types of force based on their application.": {
                    basic: "Forces are classified into two types based on application: Contact forces require physical touch between objects (examples: friction, tension, normal force). Non-contact forces act at a distance without physical contact (examples: gravitational force, magnetic force, electrostatic force).",
                    elementary: "Based on application, forces are classified into: (1) Contact Forces - These forces act only when objects are in physical contact. Examples include friction (opposes motion), tension (pulling force in strings), normal force (perpendicular support force), and applied force. (2) Non-Contact Forces - These forces can act even without physical touch. Examples include gravitational force (attraction between masses), magnetic force (between magnets), and electrostatic force (between charged objects).",
                    intermediate: "Forces are categorized based on their mode of application: Contact forces require direct physical interaction between objects. These include friction (parallel to surface, opposes relative motion), normal force (perpendicular to surface, prevents penetration), tension (transmitted through rope/string), air resistance, and muscular force. Non-contact or field forces act through space without direct contact. These include gravitational force (universal attraction between all masses following F=Gm‚ÇÅm‚ÇÇ/r¬≤), electromagnetic force (between charged particles), and nuclear forces (strong and weak forces at atomic level).",
                    advanced: "Classification of forces based on application yields two fundamental categories: Contact forces arise from electromagnetic interactions at the molecular level during physical contact. These include friction (static and kinetic, depending on coefficient Œº and normal force), normal force (electromagnetic repulsion between electron clouds), tension (internal cohesive forces in constrained objects), and viscous forces in fluids. Non-contact forces represent fundamental interactions: gravitational force (F=Gm‚ÇÅm‚ÇÇ/r¬≤, infinite range, always attractive), electromagnetic force (Coulomb's law F=kq‚ÇÅq‚ÇÇ/r¬≤, infinite range, can be attractive or repulsive), strong nuclear force (binding nucleons, range ~10‚Åª¬π‚Åµm), and weak nuclear force (responsible for radioactive decay).",
                    expert: "Force classification based on application reflects the four fundamental interactions in nature. Contact forces are macroscopic manifestations of electromagnetic interaction at the quantum level. Friction emerges from van der Waals forces and mechanical interlocking at microscopic scales, describable through Coulomb and Amontons-Coulomb laws with corrections for adhesion. Normal force represents Pauli exclusion principle preventing electron orbital overlap. Non-contact forces include: Gravitation (gauge boson: graviton theoretically, field theory described by Einstein's general relativity with stress-energy tensor T_ŒºŒΩ), Electromagnetic (photon-mediated, unified by Maxwell's equations and QED), Strong force (gluon-mediated, confined by QCD asymptotic freedom), Weak force (W¬±, Z‚Å∞ bosons, responsible for beta decay via electroweak unification SU(2)√óU(1))."
                }
            };

            // Default answer if specific question not found
            const defaultAnswers = {
                basic: "This is a basic level answer that provides fundamental understanding of the concept. It includes key definitions and simple explanations suitable for beginners.",
                elementary: "This elementary level answer builds on basic concepts with more detailed explanations. It includes examples and breaks down the concept into understandable parts for better comprehension.",
                intermediate: "This intermediate level answer provides comprehensive coverage of the topic with scientific explanations, formulas, and practical applications. It requires good understanding of fundamental concepts.",
                advanced: "This advanced level answer includes in-depth scientific reasoning, mathematical derivations, and real-world applications. It demonstrates mastery of the subject matter with detailed analysis.",
                expert: "This expert level answer provides exhaustive analysis with quantum mechanical considerations, advanced mathematical formulations, and connections to cutting-edge research. It represents the highest level of understanding."
            };

            if (answers[question] && answers[question][level]) {
                return answers[question][level];
            } else {
                return defaultAnswers[level];
            }
        }

        function startRecite() {
            document.getElementById('answer-display').style.display = 'none';
            document.getElementById('recite-section').classList.add('active');
            
            // Reset everything
            currentState.userTranscript = '';
            currentState.timeRemaining = 180;
            currentState.isRecording = false;
            document.getElementById('transcription').textContent = 'Your answer will appear here as you speak...';
            document.getElementById('recording-status').textContent = 'Ready to record. Click the microphone!';
            document.getElementById('micBtn').classList.remove('recording');
            updateTimer();
        }

        function toggleRecording() {
            const micBtn = document.getElementById('micBtn');
            const status = document.getElementById('recording-status');
            
            if (!currentState.recognition) {
                alert('üé§ Speech recognition is not supported in your browser.\n\nPlease use Chrome, Edge, or Safari for voice recording feature.');
                return;
            }
            
            if (!currentState.isRecording) {
                // Start recording
                try {
                    currentState.recognition.start();
                    currentState.isRecording = true;
                    micBtn.classList.add('recording');
                    status.textContent = 'üî¥ Recording... Speak now!';
                    
                    // Start timer
                    currentState.timerInterval = setInterval(() => {
                        currentState.timeRemaining--;
                        updateTimer();
                        
                        if (currentState.timeRemaining <= 0) {
                            toggleRecording(); // Auto-stop
                            alert('Time is up! Your answer has been recorded.');
                        }
                    }, 1000);
                } catch (error) {
                    console.error('Failed to start recording:', error);
                    status.textContent = 'Error starting recording. Please try again.';
                }
            } else {
                // Stop recording
                try {
                    currentState.recognition.stop();
                } catch (error) {
                    console.error('Error stopping recognition:', error);
                }
                currentState.isRecording = false;
                micBtn.classList.remove('recording');
                status.textContent = 'Recording stopped. Click Submit to evaluate your answer.';
                
                if (currentState.timerInterval) {
                    clearInterval(currentState.timerInterval);
                }
            }
        }

        function updateTimer() {
            const minutes = Math.floor(currentState.timeRemaining / 60);
            const seconds = currentState.timeRemaining % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            const timerEl = document.getElementById('timer');
            timerEl.textContent = display;
            
            timerEl.classList.remove('warning', 'danger');
            if (currentState.timeRemaining <= 30) {
                timerEl.classList.add('danger');
            } else if (currentState.timeRemaining <= 60) {
                timerEl.classList.add('warning');
            }
        }

        function stopRecite() {
            if (currentState.isRecording) {
                toggleRecording();
            }
            if (currentState.timerInterval) {
                clearInterval(currentState.timerInterval);
            }
            
            document.getElementById('recite-section').classList.remove('active');
            document.getElementById('answer-display').style.display = 'block';
            
            currentState.userTranscript = '';
            document.getElementById('transcription').textContent = 'Your answer will appear here as you speak...';
            document.getElementById('recording-status').textContent = 'Ready to record';
            document.getElementById('micBtn').classList.remove('recording');
        }

        function submitForEvaluation() {
            if (!currentState.userTranscript || currentState.userTranscript.trim().length < 10) {
                alert('‚ö†Ô∏è Please record your answer before submitting!\n\nYour answer is too short. Speak more about the topic.');
                return;
            }

            if (currentState.isRecording) {
                toggleRecording();
            }

            document.getElementById('recite-section').classList.remove('active');
            document.getElementById('feedback-section').classList.add('active');
            
            document.getElementById('feedback-text').innerHTML = '<div class="loading"><div class="spinner"></div><p>Evaluating your answer...</p></div>';

            // Evaluate answer
            setTimeout(() => {
                const evaluation = evaluateAnswer(currentState.question.text, currentState.userTranscript);
                displayFeedback(evaluation);
            }, 1500);
        }

        function evaluateAnswer(question, userAnswer) {
            const lowerAnswer = userAnswer.toLowerCase();
            const wordCount = userAnswer.trim().split(/\s+/).length;
            
            // Simple keyword-based scoring
            let score = 0;
            const maxScore = 100;
            
            // Word count score (20 points)
            if (wordCount >= 30) score += 20;
            else if (wordCount >= 20) score += 15;
            else if (wordCount >= 10) score += 10;
            else score += 5;
            
            // Keyword matching (60 points)
            const keywords = {
                "Define inertia": ['inertia', 'resist', 'change', 'motion', 'rest', 'direction', 'property', 'object'],
                "types of force": ['contact', 'non-contact', 'friction', 'gravity', 'magnetic', 'force', 'touch'],
                "Newton": ['law', 'force', 'acceleration', 'mass', 'momentum', 'motion', 'action', 'reaction'],
                "mass and weight": ['mass', 'weight', 'scalar', 'vector', 'constant', 'varies', 'gravity', 'kilogram', 'newton']
            };
            
            // Find relevant keywords
            let relevantKeywords = [];
            for (let key in keywords) {
                if (question.toLowerCase().includes(key.toLowerCase())) {
                    relevantKeywords = keywords[key];
                    break;
                }
            }
            
            if (relevantKeywords.length === 0) {
                relevantKeywords = ['concept', 'explain', 'define', 'state', 'describe'];
            }
            
            let keywordScore = 0;
            relevantKeywords.forEach(keyword => {
                if (lowerAnswer.includes(keyword)) {
                    keywordScore += 60 / relevantKeywords.length;
                }
            });
            score += Math.min(keywordScore, 60);
            
            // Structure score (20 points)
            const sentences = userAnswer.split(/[.!?]+/).filter(s => s.trim().length > 0);
            if (sentences.length >= 3) score += 20;
            else if (sentences.length >= 2) score += 15;
            else if (sentences.length >= 1) score += 10;
            else score += 5;
            
            return {
                score: Math.min(Math.round(score), 100),
                wordCount: wordCount,
                relevantKeywords: relevantKeywords
            };
        }

        function displayFeedback(evaluation) {
            const scoreCircle = document.getElementById('score-circle');
            const feedbackText = document.getElementById('feedback-text');
            
            scoreCircle.textContent = evaluation.score + '%';
            
            // Color based on score
            if (evaluation.score >= 80) {
                scoreCircle.style.background = 'linear-gradient(145deg, #4caf50, #45a049)';
            } else if (evaluation.score >= 60) {
                scoreCircle.style.background = 'linear-gradient(145deg, #ff9800, #f57c00)';
            } else {
                scoreCircle.style.background = 'linear-gradient(145deg, #f44336, #d32f2f)';
            }
            
            let feedbackHTML = '<h3 style="color: #667eea; margin-bottom: 20px;">üìä Detailed Evaluation</h3>';
            
            feedbackHTML += '<div style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin-bottom: 20px;">';
            feedbackHTML += `<p style="font-size: 1.2em; margin-bottom: 15px;"><strong>Your Score: ${evaluation.score}/100</strong></p>`;
            feedbackHTML += `<p style="color: #666;">Word Count: ${evaluation.wordCount} words</p>`;
            feedbackHTML += '</div>';
            
            feedbackHTML += '<div style="background: #e3f2fd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">';
            feedbackHTML += '<h4 style="color: #1976D2; margin-bottom: 10px;">üìù Your Answer:</h4>';
            feedbackHTML += `<p style="line-height: 1.8;">${currentState.userTranscript}</p>`;
            feedbackHTML += '</div>';
            
            feedbackHTML += '<div style="background: #f1f8e9; padding: 20px; border-radius: 10px; margin-bottom: 20px;">';
            feedbackHTML += '<h4 style="color: #689F38; margin-bottom: 10px;">üìñ Expected Answer:</h4>';
            feedbackHTML += `<p style="line-height: 1.8;">${currentState.currentAnswer}</p>`;
            feedbackHTML += '</div>';
            
            feedbackHTML += '<div style="background: #fff3cd; padding: 20px; border-radius: 10px; border-left: 4px solid #ffc107;">';
            feedbackHTML += '<h4 style="color: #856404; margin-bottom: 10px;">üí° Feedback:</h4>';
            feedbackHTML += '<ul style="margin-left: 20px; line-height: 1.8;">';
            
            if (evaluation.score >= 80) {
                feedbackHTML += '<li><strong>Excellent work!</strong> You demonstrated strong understanding of the concept.</li>';
                feedbackHTML += '<li>Your answer covered most key points effectively.</li>';
            } else if (evaluation.score >= 60) {
                feedbackHTML += '<li><strong>Good effort!</strong> You have basic understanding but can improve.</li>';
                feedbackHTML += '<li>Try to include more key concepts and examples in your answer.</li>';
            } else {
                feedbackHTML += '<li><strong>Keep practicing!</strong> Review the expected answer carefully.</li>';
                feedbackHTML += '<li>Focus on understanding key concepts before attempting again.</li>';
            }
            
            if (evaluation.wordCount < 20) {
                feedbackHTML += '<li>Try to elaborate more on your answer. Aim for at least 20-30 words for brief answers.</li>';
            }
            
            feedbackHTML += '</ul></div>';
            
            feedbackText.innerHTML = feedbackHTML;
        }

        function tryAgain() {
            document.getElementById('feedback-section').classList.remove('active');
            document.getElementById('answer-display').style.display = 'block';
            
            currentState.userTranscript = '';
            document.getElementById('transcription').textContent = 'Your answer will appear here as you speak...';
            document.getElementById('recording-status').textContent = 'Ready to record';
        }

        function nextQuestion() {
            document.getElementById('feedback-section').classList.remove('active');
            document.getElementById('learning-interface').classList.remove('active');
            document.getElementById('question-selection').style.display = 'block';
            
            currentState.question = null;
            currentState.userTranscript = '';
            currentState.level = 'basic';
            
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.level === 'basic') {
                    btn.classList.add('active');
                }
            });
            
            updateBreadcrumb();
        }

        function goBack() {
            if (currentState.question) {
                currentState.question = null;
                document.getElementById('learning-interface').classList.remove('active');
                document.getElementById('question-selection').style.display = 'block';
                document.getElementById('answer-display').style.display = 'block';
                document.getElementById('recite-section').classList.remove('active');
                document.getElementById('feedback-section').classList.remove('active');
                
                if (currentState.isRecording) {
                    toggleRecording();
                }
            } else if (currentState.lesson) {
                currentState.lesson = null;
                document.getElementById('question-selection').style.display = 'none';
                document.getElementById('lesson-selection').style.display = 'block';
            } else if (currentState.subject) {
                currentState.subject = null;
                document.getElementById('lesson-selection').style.display = 'none';
                document.getElementById('subject-selection').style.display = 'block';
            } else if (currentState.grade) {
                currentState.grade = null;
                document.getElementById('subject-selection').style.display = 'none';
                document.getElementById('grade-selection').style.display = 'block';
            }
            updateBreadcrumb();
        }

        function updateBreadcrumb() {
            let breadcrumbText = 'Home';
            
            if (currentState.board === 'tn') {
                breadcrumbText += ' > TN State Board';
            } else if (currentState.board === 'cbse') {
                breadcrumbText += ' > CBSE';
            }
            
            if (currentState.medium === 'english') {
                breadcrumbText += ' > English Medium';
            } else if (currentState.medium === 'tamil') {
                breadcrumbText += ' > Tamil Medium';
            }
            
            if (currentState.grade) {
                breadcrumbText += ' > Grade ' + currentState.grade;
            }
            
            if (currentState.subject) {
                breadcrumbText += ' > ' + currentState.subject.charAt(0).toUpperCase() + currentState.subject.slice(1);
            }
            
            if (currentState.lesson) {
                breadcrumbText += ' > Lesson ' + currentState.lesson;
            }

            if (currentState.question) {
                breadcrumbText += ' > Question';
            }
            
            document.getElementById('breadcrumb').textContent = breadcrumbText;
            document.getElementById('backBtn').style.display = (currentState.grade || currentState.question) ? 'block' : 'none';
        }
    </script>
</body>
</html>